112 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 13:54:49.15 ID:oNCeBx100 [1/3]
最近パンツとブラのレーンの＜を押してアイコンを素早くずらしていくと　すぐに強制終了しちゃうんだけど何が原因なんだろう？
ＭＯＤを入れすぎてarcsファイルが重くなりすぎたんだろうか
気がついたら100ギガ超えてたし

115 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 14:30:52.43 ID:SqTjBARj0 [2/4]
>>112
アイコンの保存形式が間違ってるのが原因かな
多層レイヤだったりアルファチャンネル入ってなかったり
「背景」or「background」以外の名称がレイヤ名だったり…
間違ったアイコンが表示されるときに落ちやすいと思う
wikiに詳しく書いてあるから読んでみて

117 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 15:23:26.28 ID:kd5QcI+N0
>>115
よく聞くが、レイヤ名で落ちるってのはガセじゃないのか？
他の名前にしているけど一度も落ちたこと無いぞ。
レイヤαチャンネル無し(つまりこれはレイヤ無し)、でも正常に動くぞ
レイヤαチャンネル無しでレイヤ構造を保存できるソフトってあるのか？
でもレイヤ複数あるときは落ちる。(常に落ちるわけではないっぽいが)

118 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 16:01:50.79 ID:SqTjBARj0 [3/4]
>>117
レイヤ名が原因で落ちるのは違うんじゃないか、というのは自分も多少思ってます
昔アイスキャンデーを作った時に、レイヤ名がクソ長い名前になってるのが原因（多分）で落ちた経験が一度だけありました
（ちょっと昔すぎてうろ覚えで申し訳ない･･･）
でもそれ以外でレイヤ名が原因で落ちたことないから、実際はどうなんでしょうね？

レイヤのアルファチャンネルを削除は普通に機能としてありますよ
しかし32bitでないと正常に読み込まないけど、なぜか24bitでも大丈夫なときあるのよね…
アルファチャンネル無しのアイコンを何度か選択していくといずれ落ちないかな？自分はよく落ちました

119 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 16:17:57.46 ID:oNCeBx100 [2/3]
自分の場合はうまく言えないけど　アイコンの表示が間に合わなくて落ちるって印象です
＜を押し続けてアイコンを移動させてると落ちるけど、アイコンが１つずつ動いていくように1回ごとにゆっくりクリックすると落ちないんですわ
＞でアイコンの番号が若い順に移動させると問題ないんでとりあえずは放置してるんですが　原因が分からないんでもやもやしっぱなしｗ

あと1回だけ　エロモードでガチに抜いてる最中に瞳MODを変えようとしたら落ちたことがあるｗ
いいところだったのに　いきなり強制終了した時のやるせなさは異常ｗｗｗ

120 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 16:59:38.17 ID:ZgiFRTsx0
そういう症状が起きたことは無いけど、大量にtahファイルがあるなら
ある程度ファイルを纏めてみるとかで解決しないかな？

スマイルプリキュア惨状！
ttp://cdn.3dcustom.net/TAuploader/src/XP21404.png

123 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 17:07:48.28 ID:SqTjBARj0 [4/4]
>>119
どうなんだろ、やっぱ100Gは多すぎなのでは？
よく分からないけどハッシュ衝突とか同一modがあったりとか、整理しないと色々問題多そうな気がする…

それか、もしかしたらブラとパンツの欄じゃなくてスク水とか近辺の欄のアイコンが原因かも？
100G超のarcsを全部調べるのは大変だけど、落ちたときに画面表示されたアイコンを覚えて
アタリを付けて直していくのが手っとり早いかもしれないですね（かなり古いmodはアイコンミスが多かった印象）

てか、psd形式じゃなくてbmp形式とか別のにしてればこういう問題起きないのにね(´･ω･`)

>>120
キャラ違うけどこれはこれでアリだな。てか惨状って…ｗ

127 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 18:33:42.88 ID:YsZpSy770 [1/5]
ちょい亀だけど一応。ポーズお借りして>>1立て乙です。体操服欲しいなぁ
http://cdn.3dcustom.net/TAuploader/src/XP21405.png

>>112
アイコンで落ちるのは、アルファチャンネル、レイヤー数、レイヤー名使用文字、レイヤー名文字数、たぶんどれも全部関係無いと思う
確実に落ちるのが確認出来てるのは「レイヤー名に改行が混じった場合」。このときは確実に落ちるのを確認してるよ。
ただふつうにやってもまずレイヤー名に改行は混じらない。ただし、

1.コピペでレイヤーを追加した
2.追加したレイヤーを下のレイヤーに追加しないで保存した

この状況で簡単に発生してしまいうる。
厄介なのは、一度保存して開き直すと自動で付けられるレイヤー名が変わり、改行以下の「(貼り付けられたレイヤー)」が消える。
ただし改行情報はレイヤー名にゴミとして残るようで、このレイヤーがあると落ちる。これはカス子ってよりGIMPの仕様だと思う。

130 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 18:55:04.49 ID:Mu1QL1i70 [1/2]
>>127
>2.追加したレイヤーを下のレイヤーに追加しないで保存した

これってレイヤー数が複数あるってことじゃないの？

131 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 18:59:34.32 ID:YsZpSy770 [2/5]
>>130
ただレイヤー数が複数あるだけでは何とも無い。あくまで「改行文字情報がレイヤー名に含まれてる」のが条件である模様。
ためしに複数レイヤーでやってみるとわかるよ。あと正確には 『「改行以下の(貼り付けられたレイヤー)以外が消える)」』だった。

132 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 19:07:53.98 ID:Mu1QL1i70 [2/2]
>>131
ちょっと試しにその落ちるというpsdファイル観てみたい
どこかに上げてくれませんか？

133 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 19:08:49.29 ID:oNCeBx100 [3/3]
原因判明
以前前提MODのないやつをTDCGExplorerでダミーTahを作って導入してたんですが　それがおかしくなってたみたい
MODを削除したら問題なくレーンを動かせるようになりましたｗ

そのMODをダミー作って導入したのは2週間以上前なのに　なんでこの数日でそんな症状が出るようになったかは不明ですが

134 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 19:20:41.09 ID:YsZpSy770 [3/5]
>>132
特定のアイコンPSDが原因ではなく 『コピペで作成し、レイヤー統合していない状態のレイヤー』 に起因するので、簡単に再現出来るよ。
試しに任意のアイコンをGIMPで編集して、レイヤーをコピペで追加した直後に保存。これをカス子に持ち込むとレーン表示でまず落ちる。
が、コピペ後に下のレイヤーに統合すれば何とも無い。
GIMPのレイヤー作成機能そのものに起因するのかもしれないが、リネームで回避可能なので改行コードを疑った。ちなみにverは2.6Portable。

135 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/29(日) 19:38:50.70 ID:YsZpSy770 [4/5]
>>132
追記。

1.コピペ後にレイヤーを統合（単一レイヤー化）する
2.コピペ後にレイヤー名をリネーム（『背景』に）する

これでも回避可能なのはWikiにあるとおり。ただし確実に再現出来なかった。
そこで 『Wikiの記載に間違いは無いが、他の直接原因が他にある』 と仮定。これを立証するために以下を行った。

1.単一レイヤー化
　・複数のレイヤーを用意し、落ちないこと （レイヤー数パタンは２〜６を用意）
　・複数のレイヤーに『アルファチャンネル無し』が含まれても落ちないこと

2.背景以外の名前
　・『全角カナ』『半角カナ』『全角英数』『半角英数』『全角記号』『半角記号』を使用し、落ちないこと
　・レイヤー名が半角1〜23文字までを使用し、落ちないこと
　　（23文字である理由は『貼り付けられたレイヤー』で落ちた事例があるため）

上記では落ちないことをさっき確認した。確実に再現可能だったパターンは先の通り

153 名前：117[sage] 投稿日：2012/04/30(月) 01:46:00.01 ID:7sOgei7Y0 [1/4]
言ってみるもんだな。知らない情報が混ざっている。
>>118
「レイヤのアルファチャンネルを削除は普通に機能としてありますよ」

わるいけど、photoshopでやる方法を教えて欲しい。いやマジでお願いします。

>>127
レイヤ名に改行を入れることの出来るソフトが存在しているのか。知らなかった。
レイヤ名に改行ありは、通常のソフトでは見られないかなり珍しい状態なので、
落ちる原因になりうると思います。

>>131
経験的に、「改行付きレイヤ名」を含まない複数レイヤでも落ちるよ。
ただし、複数レイヤで常に落ちるわけではないというのは正しいと思う。

158 名前：117[sage] 投稿日：2012/04/30(月) 02:02:41.12 ID:7sOgei7Y0 [2/4]
PSDってかなり変わったフォーマットなんだよ。
レイヤ1つを保存したとき「レイヤ情報が保存されている」と思うかもしれないが、そうとは限らない。

レイヤとは別に「全レイヤを結合した画像」(=以下ではPrevと書く)が常に含まれている。
だから、レイヤ一枚しかないとき(=photoshopで一番下に出来る背景(レイヤ)のみのときを含む)
あり得るPSDのパターンは Prev(RGB) or Prev(RGBA) or Prev(RGB or RGBA)+Layer(RGBA)

これらなら、カス子での読み込みは成功すると思う。
ただし、photoshopで付けられるような多彩なレイヤ機能を付けていると落ちてもおかしくはないので、
1枚のレイヤにして、レイヤマスクとか調整レイヤとか変な「おかず」を付けない。
選択範囲とかから作るチャンネルも付けない。
とにかくシンプルを心がける。非標準的な「改行付きレイヤ名」も避けるべき。

で、レイヤ名が「背景」でなくてはいけない、という誤解は、photoshop で単一レイヤで保存しようとすると、
必然的にレイヤ名が「背景」になっている場合が多いところから来ているんじゃないかと思う。

163 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 06:23:22.99 ID:d4TQJQaG0 [1/6]
>>153
ttp://help.adobe.com/ja_JP/photoshop/cs/using/WSA4A2F743-1D65-4299-B089-9A2200BD0962a.html
ttp://kb2.adobe.com/jp/cps/288/2883.html

自分はもっぱらgimp派です
フォトショはエレメンツ8.0なら持ってるんですが、ほとんど使ってないので詳しくないです。が…
ちょこっと調べた限りだと正規版でないとチャンネルの操作（削除等）はできなさそうですね
gimpだとレイヤを選択して右クリックで「アルファチャンネルの削除」の欄があります
まぁ普通使いませんけどね（透明処理を一新したいときに使うくらいかな、多分）

164 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 06:24:31.22 ID:d4TQJQaG0 [2/6]
>>127さんの言ってた通りに再現すると確実に落ちました
ただ、レイヤ名に改行が入ってても大丈夫っぽいです
レイヤ名文字数が関係してるっぽいです

あいう
えお

↑をコピペしてレイヤ名にしても正常（？）に動作しました

あいうえおかきくけこさ

↑がレイヤ名でも大丈夫です

あいうえおかきくけこさし

↑がレイヤー名だと落ちます

貼り付けられたレイヤー

これも同じ文字数なので落ちます

貼り付けられたレイヤ1

1は半角です。これだと落ちませんでした

つまり全角11文字以内、半角23文字以内のレイヤ名なら大丈夫（かも）ってことだと思います

165 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 06:25:00.15 ID:d4TQJQaG0 [3/6]
あと、「アルファチャンネルなしだと落ちる」等wikiの注意書きで書かれてる内容も間違ってないと思うんですよね
自分の環境では落ちたり落ちなかったりでホント意味不明なんですが…
しかも最近ではほぼ落ちなくなったし…（昔はよく落ちてたんですよ）
理論でなく経験上でしか語れなくて申し訳ないです

長文失礼しました

168 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 11:01:29.37 ID:7sOgei7Y0 [3/4]
>>163
gimpでPSD保存してみた。
本当にレイヤアルファ無いわ。驚愕した。外見上削除していてもPSD保存したときは
空のアルファが出力されていると信じて疑わなかった。
# バイナリレベルでPrev(RGB)+Layer(RGB)という内部構造になっているのを確認

ちなみに、「PrevのみLayerなし」で保存できるのは、自分が知っている範囲では本家photoshopのみ

ひょっとして、保存に使用したソフト名と条件をセットで書かないと意味がないのかも？
# PSD保存の実装方法の違いが本質的な原因

171 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 11:30:02.63 ID:7sOgei7Y0 [4/4]
>>164
gimpの場合なら、原因がわかったかも。

gimpではレイヤ名の保存が全てUTF-8になっている。
いや、レイヤ名がUnicodeでも保存されるのは間違ってないんだけど、Unicode名は拡張データとして
保存されて、レイヤ構造内には古典的な文字コード(Shift-JIS)で書き込むのが普通。
だからSJISだと思っている文字コードを読んでいるのに、意表を突いてUnicode文字列を食らっているので、
レイヤ名の文字によっては落ちるのかも。

あと、gimpではレイヤ名の最後に改行コード(0D 0A)が常についているみたい。(一行であっても)

これが正しいとすれば、「gimpでは安全とわかっているレイヤ名にしておくのがよい」というのが答え。

172 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 12:03:07.45 ID:ce6YTwGs0
>>112-
レイヤー名が不正だったりアルファチャンネルがないと落ちるよ。

落ちる可能性があるのは以下の例がある（経験則なので間違ってるかも）。

・レイヤー名にファイル名として不適切な記号（半角ピリオドなど）を含む場合
　レイヤー名の改行の仕方が分からんので検証していませんが、半角ピリオドは落ちた記憶がある。
・文字数が長すぎる場合（>>164氏検証乙）
　半角で10文字程度（全角なら半分）で命名しておくのが無難。
　レイヤーをコピーして「コピー #1」とか付与しても超過しにくい。もっとも、完成前に「コピー #1」は別の名前に変えると思うけど。
・アルファチャンネルがない（24ビットカラー）
　ゼロから画像を作成すると、デフォルトでアルファチャンネルがついていると思うが、他の画像から作成しようとすると、
　読み込んだ元のファイルにアルファチャンネルがなければ、明示的にアルファチャンネルを追加しないと当然アルファチャンネルなしの画像になるので注意。
・レイヤー数が不正
　ファイルによりレイヤーの数が決まっているので、レイヤー数が多すぎても少なすぎてもエラーになる。
　いわゆるMODのアイコンのPSDファイルのレイヤー数は「1」だが、システムUI系のPSDファイル、例えばmainUI,psdのレイヤー数は「6」になっている。

178 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 14:02:41.51 ID:pcz/Exz+0 [1/2]
>>164
検証乙です。再確認しました。改行関係無かったっすね…文字数かぞえ間違えてましたorz
正確には『全角11文字以上で100％再現』ですね。横着せずに試験仕様つくればよかった

>>168>>171
改行(ry　　驚きました。GIMPのレイヤー名は半角だと１バイトだったけど、全角は３バイトだったっす。盲点でしたね
試しに全角だと10文字まで大丈夫で、11文字で異常終了。半角だと32文字まで大丈夫で、33文字で異常終了
『閾値は32バイト』って事みたい。これを超過すると今のところ100％再現です。直接原因のひとつとして確定かと

>>172
ピリオドのみのレイヤー名、アルファチャンネル無し、いずれも異常終了を再現出来ませんでした
おそらく経験された際には↑のバイト数制限か、それ以外の未知の原因と複合してたっぽいです

>>173
･･･テイクアウトできまつか？

180 名前：名無しさん＠ピンキー[sage] 投稿日：2012/04/30(月) 14:37:46.66 ID:d4TQJQaG0 [4/6]
>>171
やはり改行コードあったんですね、検証乙です

そして訂正します。>>164は全角11文字以内、半角23文字以内ではなく全角10文字以内、半角33文字以内でした（未確定）

あいうえおかきくけこ→ok、あいうえこかきくけこ1→ok、あいうえおかきくけこさ→NG
あいうえお（改行）かきくけこ→ok
123456789012345678901234567890123→ok、1234567890123456789012345678901234→NG

文字記号制限は>>172さんの仰るようにいくつかあるかもしれません
だけどこれ以上の検証は難しいし無意味だと思うので、「背景」or「background」で統一するのが無難ですね

>>178
これを書いて再検証してる間にそちらで検証していただいたみたいで感謝（間違いｽﾐﾏｾﾝ）

>>179
1200円払います！そのパンティセット下さい！

