ダウンロードありがとうございます

●TSOWeight ver 0.0.8

これはなに
頂点ウェイト編集を簡単に行うためのツールです。

tso2toy系ツールと比較して、下記のような利点があります。
・tsoのまま編集できます。
・ヘビーセーブを読み込めます。
・ポーズを変更できます。
・カス子と同じシェーダで描画されます。

動作環境
・.NET Framework 3.5
・DirectX 9.0c
・toonshaderに対応したGPU
・ICSharpCode.SharpZipLib.dll (同梱)
・CSScriptLibrary.dll (同梱)

使い方
下記のプログラムがあります。
・TSOWeight.exe：頂点ウェイト編集を行う。

◆TSOWeight.exe
エクスプローラからTSOWeight.exeを起動します。
マイドキュメントのカス子セーブ (system.tdcgsav.png) が自動的に読み込まれます。

	参考：png tso tmoファイルを画面上にドラッグ＆ドロップ (d&d) すると追加できます。

注意：
・TSOWeight.exeと同じフォルダにtoonshader.cgfxが必要です。
・必ずpng tso tmoファイルをバックアップしてください。

使い方
画面中央の描画ウィンドウにモデルが描画されています。

ウェイトを編集するために、まずメッシュを選択します。
画面右側の[TSOファイル]からtsoを選択します。そして[メッシュ]からメッシュを選択します。
すると描画ウィンドウに多くの赤い点が現れます。これが頂点です。
見にくい場合はマウスで拡大しておきます。

頂点をクリックすると選択頂点が緑色になります。
その周囲の頂点は黄色になります。これはウェイトを修正する（塗る）範囲を表します。
メニューから[表示]->[視点の回転中心]->[選択頂点]を指定すると、選択頂点がカメラ回転中心になります。

画面右側の[頂点ウェイト]に選択頂点のウェイト情報が現れます。
[頂点ウェイト]の任意行をクリックしてみます。するとボーンを選択した状態になります。

メニューから[表示]->[表示形式]->[ウェイト]を指定します。
メニューから[表示]->[メッシュ]->[選択メッシュのみ表示]を指定します。
すると選択メッシュのみ黒く描画され、その上に選択ボーンの影響範囲が白く表示されます。
メニューから[表示]->[表示形式]->[トゥーン]を指定します。
メニューから[表示]->[メッシュ]->[全てのメッシュを表示]を指定します。
すると元の描画に戻ります。
このようにして、モデルのスキンウェイトの状態を確認できます。

ウェイトを変更するには、画面右側の[加算][減算][代入]ボタンを押します。
すると対象頂点（緑色と黄色）に対して選択ボーンへのウェイトが加算・減算・代入されます。
[強度]スライダで加算値を変更できます。
[半径]スライダで対象頂点の範囲を変更できます。

[加算][減算][代入]によるウェイト変更は、元に戻す・やり直すことができます。
メニューから[編集]->[元に戻す]またはCtrl+Zキーを押すと、直前の操作を元に戻します。
メニューから[編集]->[やり直す]またはCtrl+Yキーを押すと、直前の操作をやり直します。
元に戻す・やり直すに回数制限はありません。

メニューから[ファイル]->[名前を付けて保存]を指定すると、選択tsoを任意の名前で保存できます。


操作方法
●画面中央：描画ウィンドウ
モデルが描画されるウィンドウです。

マウス
　左ボタンを押しながらドラッグ：X/Y軸方向に回転
　中央ボタンを押しながらドラッグ：X/Y軸方向に移動
　右ボタンを押しながらドラッグ：Z軸方向に移動
　Ctrlキーを押しながらクリック：ライト方向を指定

頂点：
選択メッシュに含まれる頂点は赤色の点で表示されます。
頂点をクリックすると選択できます。選択頂点は緑色の点で表示されます。
選択頂点周囲の頂点は操作対象頂点になります。黄色の点で表示されます。

ボーン：
ボーンは青い二重丸と線で表示されます。
マーカ（二重丸）をクリックすると選択できます。選択ボーンは赤色で表示されます。
変形操作パネルを使うと、移動・回転を行えます（ローカル座標系）。

	注意：ボーンを選択する前にtsoを選択しておく必要があります。

●画面右側：TSOファイル
描画モデルを構成するtsoの一覧です。
行選択するとtsoを選択できます。

●画面右側：メッシュ
選択tsoに含まれるメッシュの一覧です。
行選択するとメッシュを選択できます。

●画面右側：頂点ウェイト
選択頂点に含まれるスキンウェイトの一覧です。
行選択するとボーンを選択できます。

●画面右側：強度スライダ
ペイント操作で加算するウェイト値を指定します。

●画面右側：半径スライダ
ペイント操作の対象頂点となる範囲を指定します。選択頂点からの距離です。

●画面右側：[加算(&G)]ボタン
ペイント操作を行います。
対象頂点に対して選択ボーンへのウェイトが加算されます。

●画面右側：[減算(&R)]ボタン
ペイント操作を行います。
対象頂点に対して選択ボーンへのウェイトが減算されます。

●画面右側：[代入(&A)]ボタン
ペイント操作を行います。
対象頂点に対して選択ボーンへのウェイトが代入されます。

●メニュー：ファイル(&F)
・新規作成(&N)：描画モデルを消去します。
・開く(&O)：pngまたはtsoファイルを開きます。
・名前を付けて保存(&A)：選択tsoをtsoファイルとして保存します。
・終了(&X)：アプリケーションを終了します。

●メニュー：編集(&E)
・元に戻す(&U)：直前の操作を元に戻します。
・やり直し(&R)：直前の操作をやり直します。

●メニュー：表示(&V)
　表示形式(&S)
　　トゥーン(&T)：トゥーン描画に切り替えます。
　　ウェイト(&H)：ウェイト描画に切り替えます。
　　ワイヤー(&W)：ワイヤー描画に切り替えます。
　視点の回転中心(&C)
　　初期位置(&R)：カメラの位置をリセットします。
　　選択頂点(&V)：選択頂点をカメラ回転中心にします。
　　選択ボーン(&B)：選択ボーンをカメラ回転中心にします。
　メッシュ(&M)
　　全てのメッシュを表示(&A)：全てのメッシュを描画します。
　　選択メッシュのみ表示(&S)：選択メッシュのみ描画します。
　頂点(&V)
　　全ての頂点を表示(&A)：全ての頂点を描画します。
　　表面頂点のみ表示(&S)：表面頂点のみ描画します。
　　なし(&N)：頂点を描画しません。
　ボーン(&B)
　　全てのボーンを表示(&A)：全てのボーンを描画します。
　　なし(&N)：ボーンを描画しません。


ver 0.0.7 からの変更点：
・減算では最小ウェイトを置き換えない
・選択頂点と半径を変更しない間は選択範囲を維持する
・代入塗り
・数値指定

ver 0.0.6 からの変更点：
・config.xml: ScreenColorName（スクリーン塗りつぶし色）を追加
・ボーン参照リストにない場合は追加

ver 0.0.5 からの変更点：
・強度：0.005 刻み
・[消す]ボタン
・ボーン操作をundo redo
・ボーン表示の有無

ver 0.0.4 からの変更点：
・ボーン操作
・減算に対応

ver 0.0.3 からの変更点：
・頂点サイズを固定
・すべてのメッシュを描画 or 選択メッシュのみ描画
・すべての頂点を描画 or 表面頂点のみ描画 or 頂点を描画しない
・ワイヤー描画モードを追加
・カメラを初期位置にリセットできる

ライセンス
・CSScriptLibrary.dll
  http://www.csscript.net/Licence.html

開発者の方へ
ソース (sources) を同梱しています。
致命的な間違いは、改造スレまで報告いただけると幸いです。

開発フォーラムについて
http://3dcustom.ath.cx/ というブログでTSOView開発プロジェクトを
立ち上げています。興味がありましたら参加して頂けると幸いです。
