ダウンロードありがとうございます

●TSOWeight ver 0.0.3

これはなに
頂点ウェイト編集を簡単に行うためのツールです。

tso2toy系ツールと比較して、下記のような利点があります。
・tsoのまま編集できます。
・ヘビーセーブを読み込めます。
・ポーズを変更できます。
・カス子と同じシェーダで描画されます。

動作環境
・.NET Framework 3.5
・DirectX 9.0c
・toonshaderに対応したGPU
・ICSharpCode.SharpZipLib.dll (同梱)
・CSScriptLibrary.dll (同梱)

使い方
下記のプログラムがあります。
・TSOWeight.exe：頂点ウェイト編集を行う。

◆TSOWeight.exe
エクスプローラからTSOWeight.exeを起動します。
マイドキュメントのカス子セーブ (system.tdcgsav.png) が自動的に読み込まれます。

	参考：png tso tmoファイルを画面上にドラッグ＆ドロップ (d&d) すると追加できます。

注意：
・TSOWeight.exeと同じフォルダにtoonshader.cgfxが必要です。
・必ずpng tso tmoファイルをバックアップしてください。

使い方
画面中央の描画ウィンドウにモデルが描画されています。

ウェイトを編集するために、まずメッシュを選択します。
画面左側の「TSOファイル」からtsoを選択します。そして「メッシュ」からメッシュを選択します。
すると描画ウィンドウに多くの赤い点が現れます。これが頂点です。
見にくい場合はマウスで拡大しておきます。

頂点をクリックすると選択頂点が緑色になります。
その周囲の頂点は黄色になります。これはウェイトを加算する（塗る）範囲を表します。
画面右側のカメラから「中心」ボタンを押すと、選択頂点がカメラ回転中心になります。

画面右側の「頂点ウェイト」に選択頂点のウェイト情報が現れます。
「頂点ウェイト」の任意行をクリックしてみます。するとボーンを選択した状態になります。

画面右側の描画モードから「ウェイト」ボタンを押します。
すると選択メッシュのみ黒く描画され、その上に選択ボーンの影響範囲が白く表示されます。
画面右側の描画モードから「トゥーン」ボタンを押します。すると元の描画に戻ります。
このようにして、モデルのスキンウェイトの状態を確認できます。

ウェイトを変更するには、画面右側の「塗る」ボタンを押します。
すると対象頂点（黄色）に対して選択ボーンへのウェイトが加算されます。
「加算ウェイト」スライダで加算値を変更できます。
「半径」スライダで対象頂点の範囲を変更できます。

「塗る」によるウェイト変更は、元に戻す・やり直すことができます。
メニューの「編集」から「元に戻す」またはCtrl+Zキーを押すと、直前の操作を元に戻します。
メニューの「編集」から「やり直す」またはCtrl+Yキーを押すと、直前の操作をやり直します。
「元に戻す」「やり直す」に回数制限はありません。

「保存」ボタンを押すと、選択tsoを任意の名前で保存できます。


操作方法
●画面中央：描画ウィンドウ
モデルが描画されるウィンドウです。

マウス
　左ボタンを押しながらドラッグ：X/Y軸方向に回転
　中央ボタンを押しながらドラッグ：X/Y軸方向に移動
　右ボタンを押しながらドラッグ：Z軸方向に移動
　CRTLキーを押しながらクリック：ライト方向を指定

頂点：
選択メッシュに含まれる頂点は赤色の点で表示されます。
頂点をクリックすると選択できます。選択頂点は緑色の点で表示されます。
選択頂点周囲の頂点は操作対象頂点になります。黄色の点で表示されます。

●画面左側：TSOファイル
描画モデルを構成するtsoの一覧です。
行選択するとtsoを選択できます。

●画面左側：メッシュ
選択tsoに含まれるメッシュの一覧です。
行選択するとメッシュを選択できます。

●画面左側：サブメッシュ
選択メッシュに含まれるサブメッシュの一覧です。
行選択するとサブメッシュを選択できます。

●画面左側：ボーン参照
選択サブメッシュに含まれるボーン参照の一覧です。
行選択するとボーンを選択できます。

●画面右側：描画モード
「トゥーン」ボタン：トゥーン描画に切り替えます。
「ウェイト」ボタン：ウェイト描画に切り替えます。

●画面右側：カメラ
「中心」：選択頂点をカメラ回転中心にします。

●画面右側：頂点ウェイト
選択頂点に含まれるスキンウェイトの一覧です。
行選択するとボーンを選択できます。

●画面右側：加算ウェイトスライダ
ペイント操作で加算するウェイト値を指定します。

●画面右側：半径スライダ
ペイント操作の対象頂点となる範囲を指定します。選択頂点からの距離です。

●画面右側：「塗る」ボタン
ペイント操作を行います。
対象頂点に対して選択ボーンへのウェイトが加算されます。

●画面右側：「保存」ボタン
選択tsoをtsoファイルとして保存します。

●メニュー：「ファイル(&F)」
・新規作成(&N)：描画モデルを消去します。
・開く(&O)：pngまたはtsoファイルを開きます。
・名前を付けて保存(&A)：選択tsoをtsoファイルとして保存します。
・終了(&X)：アプリケーションを終了します。

●メニュー：「編集(&E)」
・元に戻す(&U)：直前の操作を元に戻します。
・やり直し(&R)：直前の操作をやり直します。

